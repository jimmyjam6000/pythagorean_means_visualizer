<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Pythagorean Means</title>

  <!-- ====== STYLES ====== -->
  <style>
    body{
      margin:0;
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
      background:#fff;
      color:#111;
    }

    /* ====== LAYOUT ====== */
    .wrap{
      max-width:1200px;
      margin:0 auto;
      padding:16px;
      display:grid;
      grid-template-columns: 1fr 360px;   /* left flexible, right fixed */
      gap:16px;
      align-items:flex-start;
      box-sizing:border-box;
    }

    /* Stack only on truly small screens */
    @media (max-width: 760px){
      .wrap{
        grid-template-columns: 1fr;
      }
    }

    /* ====== CARDS ====== */
    .card{
      border:1px solid #e6e6e6;
      border-radius:14px;
      padding:14px;
      background:#fff;
      box-sizing:border-box;
    }

    /* Prevent SVG from blowing up vertically */
    .card svg{
      max-height:440px;
      width:100%;
      height:auto;
      display:block;
    }

    /* ====== TYPOGRAPHY ====== */
    h1{
      font-size:18px;
      margin:0 0 8px;
    }

    .mono{
      font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,
                  "Liberation Mono","Courier New",monospace;
    }

    .badge{
      font-size:12px;
      border:1px solid #ddd;
      border-radius:999px;
      padding:2px 8px;
      color:#333;
    }

    .hint{
      margin-top:10px;
      font-size:13px;
      color:#444;
    }

    /* ====== CONTROLS ====== */
    .row{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      flex-wrap:wrap;
    }

    .controls{
      margin-top:10px;
      display:flex;
      align-items:center;
      gap:10px;
      flex-wrap:wrap;
    }

    label{
      font-size:14px;
      color:#333;
    }

    input[type="range"]{
      width:380px;
    }

    /* ====== VALUES PANEL ====== */
    .kv{
      display:grid;
      grid-template-columns: 1fr auto;
      gap:6px 12px;
      margin-top:10px;
    }

    .eq{
      white-space:pre-wrap;
      font-size:13px;
      color:#333;
      line-height:1.55;
    }
  </style>
</head>

<body>
<div class="wrap">

  <!-- ===== LEFT: DIAGRAM ===== -->
  <div class="card">
    <div class="row">
      <h1>Pythagorean Means (radius = 1)</h1>
      <span class="badge mono">a + b = 2</span>
    </div>

    <svg viewBox="-1.25 -1.25 2.5 1.7" aria-label="Pythagorean means diagram">
      <!-- semicircle + diameter -->
      <path d="M -1 0 A 1 1 0 0 1 1 0" fill="none" stroke="#111" stroke-width="0.02"/>
    


      <!-- end ticks -->
      <line x1="-1" y1="0" x2="-1" y2="0.06" stroke="#111" stroke-width="0.02"/>
      <line x1="1" y1="0" x2="1" y2="0.06" stroke="#111" stroke-width="0.02"/>

      <g id="dyn"></g>

      <!-- a/b labels -->
      <text id="aLab" x="-0.5" y="0.16" class="mono" font-size="0.10" text-anchor="middle">a</text>
      <text id="bLab" x="0.5" y="0.16" class="mono" font-size="0.10" text-anchor="middle">b</text>
    </svg>

    <div class="controls">
      <label for="bRange">Move:</label>
      <input id="bRange" type="range" min="0.00" max="2.0" step="0.001" value="0.35" />
      <span class="mono" id="abOut"></span>
    </div>

    <div class="hint">
      A = arithmetic mean (radius), G = geometric mean,
      Q = quadratic mean,
      H = harmonic mean.
    </div>
  </div>

  <!-- ===== RIGHT: VALUES ===== -->
  <div class="card">
    <h1>Values & equations</h1>

    <div class="kv mono">
      <div>a</div><div id="aVal"></div>
      <div>b</div><div id="bVal"></div>
      <div>AM (A)</div><div id="amVal"></div>
      <div>GM (G)</div><div id="gmVal"></div>
      <div>HM (H)</div><div id="hmVal"></div>
      <div>QM (Q)</div><div id="qmVal"></div>
    </div>

    <hr style="border:none;border-top:1px solid #eee; margin:12px 0;" />

    <div class="eq mono" id="eqBlock"></div>
  </div>

</div>

<!-- ====== SCRIPT ====== -->
<script>
(() => {
  const dyn = document.getElementById("dyn");
  const bRange = document.getElementById("bRange");
  const abOut = document.getElementById("abOut");

  const aLab = document.getElementById("aLab");
  const bLab = document.getElementById("bLab");

  const aVal = document.getElementById("aVal");
  const bVal = document.getElementById("bVal");
  const amVal = document.getElementById("amVal");
  const gmVal = document.getElementById("gmVal");
  const hmVal = document.getElementById("hmVal");
  const qmVal = document.getElementById("qmVal");
  const eqBlock = document.getElementById("eqBlock");

  const svgNS = "http://www.w3.org/2000/svg";
  const el = (name, attrs={}) => {
    const n = document.createElementNS(svgNS, name);
    for (const [k,v] of Object.entries(attrs)) n.setAttribute(k, v);
    return n;
  };
  const clear = (node) => { while(node.firstChild) node.removeChild(node.firstChild); };
  const fmt = (x) => (Math.round(x*1000)/1000).toFixed(3);

  const toSvg = (p) => ({ x: p.x, y: -p.y });

  const O = { x: 0, y: 0 };
  const Ctop = { x: 0, y: 1 };

  function update(){
    const b = parseFloat(bRange.value);
    const a = 2 - b;

    const x = a - 1;
    const P = { x, y: 0 };

    const G = Math.sqrt(Math.max(0, 1 - x*x));
    const J = { x, y: G };

    const AM = 1;
    const GM = Math.sqrt(a*b);
    const HM = (2*a*b)/(a+b);
    const QM = Math.sqrt((a*a + b*b)/2);

    const F = { x: x*x*x, y: x*x*G };

    clear(dyn);

    // --- colored diameter segments (a and b) ---
dyn.appendChild(el("line",{
  x1: -1,
  y1: 0,
  x2: P.x,
  y2: 0,
  stroke: "#E97451",   // a segment color
  "stroke-width": "0.025"
}));

dyn.appendChild(el("line",{
  x1: P.x,
  y1: 0,
  x2: 1,
  y2: 0,
  stroke: "#40E0D0",   // b segment color
  "stroke-width": "0.025"
}));

    
    aLab.setAttribute("x", (-1 + x)/2);
    bLab.setAttribute("x", (x + 1)/2);

    const Osvg = toSvg(O);
    const Csvg = toSvg(Ctop);
    const Psvg = toSvg(P);
    const Jsvg = toSvg(J);
    const Fsvg = toSvg(F);

    // A
    dyn.appendChild(el("line",{ x1:Osvg.x,y1:Osvg.y,x2:Csvg.x,y2:Csvg.y, stroke:"#e11d48","stroke-width":"0.01"}));
    dyn.appendChild(el("text",{ x:0.04,y:-0.55,fill:"#e11d48","font-size":"0.14",class:"mono"})).textContent="A";

    // G
    dyn.appendChild(el("line",{ x1:Psvg.x,y1:Psvg.y,x2:Jsvg.x,y2:Jsvg.y, stroke:"#2563eb","stroke-width":"0.01"}));
    dyn.appendChild(el("text",{ x:Jsvg.x+0.03,y:(Psvg.y+Jsvg.y)/2,fill:"#2563eb","font-size":"0.14",class:"mono"})).textContent="G";

    // Q
    dyn.appendChild(el("line",{ x1:Psvg.x,y1:Psvg.y,x2:Csvg.x,y2:Csvg.y, stroke:"#16a34a","stroke-width":"0.01"}));
    dyn.appendChild(el("text",{ x:(Psvg.x+Csvg.x)/2+0.02,y:(Psvg.y+Csvg.y)/2-0.02,fill:"#16a34a","font-size":"0.14",class:"mono"})).textContent="Q";

    // helpers
    dyn.appendChild(el("line",{ x1:Osvg.x,y1:Osvg.y,x2:Jsvg.x,y2:Jsvg.y, stroke:"#111","stroke-width":"0.015"}));
    dyn.appendChild(el("line",{ x1:Psvg.x,y1:Psvg.y,x2:Fsvg.x,y2:Fsvg.y, stroke:"#111","stroke-width":"0.015"}));

    // helpers
dyn.appendChild(el("line",{ x1:Osvg.x,y1:Osvg.y,x2:Jsvg.x,y2:Jsvg.y, stroke:"#111","stroke-width":"0.015"}));
dyn.appendChild(el("line",{ x1:Psvg.x,y1:Psvg.y,x2:Fsvg.x,y2:Fsvg.y, stroke:"#111","stroke-width":"0.015"}));

// --- right angle indicator at F between PF and FO ---
(function drawRightAngleAtF(){
  const size = 0.06; // tweak for bigger/smaller corner

  // direction from F toward O (FO)
  let ux = Osvg.x - Fsvg.x, uy = Osvg.y - Fsvg.y;
  const un = Math.hypot(ux, uy) || 1;
  ux /= un; uy /= un;

  // direction from F toward P (FP)
  let vx = Psvg.x - Fsvg.x, vy = Psvg.y - Fsvg.y;
  const vn = Math.hypot(vx, vy) || 1;
  vx /= vn; vy /= vn;

  // corner points
  const p1x = Fsvg.x + ux * size, p1y = Fsvg.y + uy * size;
  const p2x = p1x + vx * size,    p2y = p1y + vy * size;
  const p3x = Fsvg.x + vx * size, p3y = Fsvg.y + vy * size;

  dyn.appendChild(el("path",{
    d: `M ${p1x} ${p1y} L ${p2x} ${p2y} L ${p3x} ${p3y}`,
    fill: "none",
    stroke: "#111",
    "stroke-width": "0.01"
  }));
})();

// H (keep this OUTSIDE the IIFE)
dyn.appendChild(el("line",{ x1:Fsvg.x,y1:Fsvg.y,x2:Jsvg.x,y2:Jsvg.y, stroke:"#d946ef","stroke-width":"0.01"}));
dyn.appendChild(el("text",{
  x:(Fsvg.x+Jsvg.x)/2+0.02,
  y:(Fsvg.y+Jsvg.y)/2-0.02,
  fill:"#d946ef",
  "font-size":"0.14",
  class:"mono"
})).textContent="H";

    // split tick
    dyn.appendChild(el("line",{ x1:Psvg.x,y1:Psvg.y,x2:Psvg.x,y2:Psvg.y+0.06, stroke:"#111","stroke-width":"0.02"}));

    dyn.appendChild(el("circle",{ cx:Psvg.x,cy:Psvg.y,r:"0.015",fill:"#111"}));

    abOut.textContent = `b=${fmt(b)} (a=${fmt(a)})`;
    aVal.textContent = fmt(a);
    bVal.textContent = fmt(b);
    amVal.textContent = fmt(AM);
    gmVal.textContent = fmt(GM);
    hmVal.textContent = fmt(HM);
    qmVal.textContent = fmt(QM);

    eqBlock.textContent =
`Arithmetic Mean (red) = (a + b)/2 = 1
Geometric Mean (blue) = √(ab)
Harmonic Mean (magenta) = 2ab/(a+b)
Quadratic Mean (green) = √((a² + b²)/2)`;
  }

  bRange.addEventListener("input", update);
  update();
})();
</script>
</body>
</html>
